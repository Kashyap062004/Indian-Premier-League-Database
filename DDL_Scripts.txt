CREATE TABLE PLAYER (
  Player_ID INT PRIMARY KEY,
  Name VARCHAR(30) NOT NULL,
  Role VARCHAR(30) NOT NULL,
  Country VARCHAR(25) NOT NULL,
  DOB DATE NOT NULL
);

CREATE TABLE TEAM (
  Team_Name VARCHAR(30),
  Year SMALLINT,
  Owner VARCHAR(30) NOT NULL,
  Coach VARCHAR(30) NOT NULL,
  Captain VARCHAR(25) NOT NULL,
	PRIMARY KEY (Team_Name,Year)
);

CREATE TABLE SPONSOR_DETAILS (
  Company_Name VARCHAR(30) PRIMARY KEY,
  Country VARCHAR(30) NOT NULL,
  CEO VARCHAR(20) NOT NULL
);

CREATE TABLE STADIUM (
  Ground_Name VARCHAR(30) PRIMARY KEY,
  City VARCHAR(15) NOT NULL,
  Gold_Seat SMALLINT NOT NULL,
  Silver_Seat SMALLINT NOT NULL,
  Bronze_Seat SMALLINT NOT NULL
);

CREATE TABLE "USER" (
  Email_ID VARCHAR(100) PRIMARY KEY,
  User_Name VARCHAR(30) NOT NULL,
  Password VARCHAR(50) NOT NULL,
  Position VARCHAR(30) NOT NULL
);

CREATE TABLE STAT (
  Player_ID INT,
  Year SMALLINT,
  Runs SMALLINT ,
  Wickets SMALLINT,
  Catches SMALLINT,
  "4's" SMALLINT,
  "6's" SMALLINT,
  "YO-YO_Score" REAL NOT NULL,
  Sold_Price REAL NOT NULL,
  Strike_Rate REAL,
  Economy REAL,
  PRIMARY KEY (Player_ID,Year),
  FOREIGN KEY (Player_ID) REFERENCES PLAYER(Player_ID)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE PAST_MATCH (
  Timestamp TIMESTAMP PRIMARY KEY,
  Team_Name VARCHAR(30) NOT NULL,
  Opponent_Team VARCHAR(30) NOT NULL,
  Year SMALLINT NOT NULL,
  Ground_Name VARCHAR(30) NOT NULL,
  Toss VARCHAR(30) NOT NULL,
  Score1 VARCHAR(7) NOT NULL,
  Score2 VARCHAR(7) NOT NULL,
  Winner VARCHAR(30) NOT NULL,
  Man_of_the_Match SMALLINT NOT NULL,
  FOREIGN KEY (Team_Name,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Opponent_Team,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE PLAYER_SCOREBOARD (
  Player_ID INT ,
  Timestamp TIMESTAMP,
  Runs SMALLINT,
  Wickets SMALLINT,
  Catches SMALLINT,
  "4s" SMALLINT,
  "6s" SMALLINT,
  Strike_Rate REAL,
  Economy REAL,
  PRIMARY KEY (Player_ID,Timestamp),
  FOREIGN KEY (Player_ID) REFERENCES PLAYER(Player_ID)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Timestamp) REFERENCES PAST_MATCH(Timestamp)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE IPL_SEASON (
  Year SMALLINT PRIMARY KEY,
  Winner VARCHAR(30) NOT NULL,
  Runner_UP VARCHAR(30) NOT NULL,
  Player_OF_The_Season INT NOT NULL,
  Orange_Cap INT NOT NULL,
  Purple_Cap INT NOT NULL,
  FOREIGN KEY (Winner,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Runner_UP,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Player_OF_The_Season) REFERENCES PLAYER(Player_ID)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Orange_Cap) REFERENCES PLAYER(Player_ID)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Purple_Cap) REFERENCES PLAYER(Player_ID)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE "TEAM'S_PLAYER" (
  Player_ID INT,
  Team_Name VARCHAR(30),
  Year SMALLINT,
  PRIMARY KEY (Player_ID,Team_Name,Year),
  FOREIGN KEY (Player_ID) REFERENCES PLAYER(Player_ID)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Team_Name,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE TEAM_SPONSOR (
  Company_Name VARCHAR(30),
  Team_Name VARCHAR(30),
  Year SMALLINT,
  Amount VARCHAR(30) NOT NULL,
  PRIMARY KEY (Company_Name,Team_Name,Year),
  FOREIGN KEY (Company_Name) REFERENCES SPONSOR_DETAILS(Company_Name)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Team_Name,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE   
);

CREATE TABLE SEASON_SPONSOR (
  Year SMALLINT,
  Company_Name VARCHAR(30),
  Sponsor_Type VARCHAR(30),
  Amount real NOT NULL,
  PRIMARY KEY (Company_Name,Sponsor_Type,Year),
  FOREIGN KEY (Company_Name) REFERENCES SPONSOR_DETAILS(Company_Name)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Year) REFERENCES IPL_SEASON(Year)
    ON DELETE CASCADE ON UPDATE CASCADE   
);

CREATE TABLE UPCOMING_MATCH (
  Timestamp TIMESTAMP PRIMARY KEY,
  Team_Name VARCHAR(30) NOT NULL,
  Opponent_Team VARCHAR(30) NOT NULL,
  Year SMALLINT NOT NULL,
  Gold_Price SMALLINT NOT NULL,
  Silver_Price SMALLINT NOT NULL,
  Bronze_Price SMALLINT NOT NULL,
  Ground_Name VARCHAR(30) NOT NULL,
  FOREIGN KEY (Team_Name,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Opponent_Team,Year) REFERENCES TEAM(Team_Name,Year)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Ground_Name) REFERENCES STADIUM(Ground_Name)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE AUDIENCE (
  Booking_ID INT PRIMARY KEY,
  Gold_Seat SMALLINT NOT NULL,
  Silver_Seat SMALLINT NOT NULL,
  Bronze_Seat SMALLINT NOT NULL,
  Email_ID VARCHAR(50) NOT NULL,
  FOREIGN KEY (Email_ID) REFERENCES "USER"(Email_ID)
    ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE TICKET_BOOKING (
  Booking_ID INT ,
  Timestamp TIMESTAMP,
  PRIMARY KEY(Booking_ID,Timestamp),
  FOREIGN KEY (Booking_ID) REFERENCES AUDIENCE(Booking_ID)
    ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (Timestamp) REFERENCES UPCOMING_MATCH(Timestamp)
    ON DELETE CASCADE ON UPDATE CASCADE
);